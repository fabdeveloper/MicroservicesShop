@startuml


actor client

client ->ProductService: ProductPurchaseConfirmRQ

ProductService -> ProductServiceFacade: ProductPurchaseConfirmRQ
ProductServiceFacade -> ProductPurchaseHelper: ProductPurchaseConfirmRQ
ProductPurchaseHelper -> PersistenceFacade: getPesristenceHelper()
PersistenceFacade -> ProductPurchaseHelper: pesistenceHelper
ProductPurchaseHelper -> PersistenceHelper: getProductBookingRepository()
PersistenceHelper -> ProductPurchaseHelper: productBookingRepository
ProductPurchaseHelper -> ProductBookingRepository: findById(productBookingId)
ProductBookingRepository -> ProductPurchaseHelper: productBookingEntity

activate ProductPurchaseHelper

rnote over ProductPurchaseHelper
"set bConfirmed=true"
endrnote

ProductPurchaseHelper -> ProductBookingRepository: save(productBookingEntity)
deactivate ProductPurchaseHelper

ProductBookingRepository -> ProductPurchaseHelper: ok
ProductPurchaseHelper -> ProductServiceFacade: ProductPurchaseConfirmRS
ProductServiceFacade -> ProductService: ProductPurchaseConfirmRS
ProductService -> client: ProductPurchaseConfirmRS



@enduml